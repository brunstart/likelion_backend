# 프로메테우스 - 실습 프로젝트 : monitoringexam
- Prometheus는 오픈소스 시계열 데이터베이스이자 모니터링 시스템
## 특징
- Pull 방식: 주기적으로 타겟 애플리케이션에서 메트릭을 수집 (스크랩)
- 시계열 데이터: 시간에 따른 메트릭 변화 저장 및 조회
- PromQL: 강력한 쿼리 언어
- 다양한 Exporter: 다양한 시스템 (DB, Redis, Nginx 등) 메트릭 수집 가능  


- Micrometer Prometheus 의존성 추가
```
dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-actuator'
    implementation 'io.micrometer:micrometer-registry-prometheus'
}
```

- application.yml 설정
```
management:
  endpoints:
    web:
      exposure:
        include:
          - health
          - info
          - metrics
          - loggers
          - threaddump
          - prometheus  # Prometheus 엔드포인트 추가
          
  endpoint:
    health:
      show-details: ALWAYS
```

## Prometheus 설정 및 실행
- prometheus.yml 파일 생성
```
global:
  scrape_interval: 5s  # 5초마다 메트릭 수집

scrape_configs:
  - job_name: 'spring-boot-app'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets: ['api1:8080']  # 컨테이너 이름:포트
```

- Prometheus 컨테이너 실행
```
docker run -d ^
  --name prometheus ^
  --network spring-net ^
  -p 9090:9090 ^
  -v "%cd%\prometheus.yml":/etc/prometheus/prometheus.yml ^
  prom/prometheus
```

# 그라파나
- Grafana는 시계열 데이터를 시각화하는 오픈소스 대시보드 도구
## 특징
- 다양한 데이터 소스 지원 (Prometheus, InfluxDB, MySQL 등)
- 풍부한 시각화 옵션 (그래프, 게이지, 테이블 등)
- 대시보드 템플릿 및 공유
- 알림 (Alert) 설정